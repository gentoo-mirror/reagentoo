diff --git a/Telegram/SourceFiles/core/basic_types.h b/Telegram/SourceFiles/core/basic_types.h
index e6cdbfa4..a22f70e7 100644
--- a/Telegram/SourceFiles/core/basic_types.h
+++ b/Telegram/SourceFiles/core/basic_types.h
@@ -33,7 +33,8 @@ using not_null = gsl::not_null<Type>;
 // Custom libc++ build used for old OS X versions already has this.
 #ifndef OS_MAC_OLD
 
-#if defined COMPILER_CLANG || defined COMPILER_GCC
+#if (defined COMPILER_CLANG || defined COMPILER_GCC) && \
+    ((defined _GLIBCXX_RELEASE && _GLIBCXX_RELEASE < 7) || (defined _LIBCPP_VERSION && _LIBCPP_VERSION < 5000))
 namespace std {
 
 template <typename T>
